#!/usr/bin/env python

# http://inspirehep.net/record/1325553/data
# Table #1 from http://hepdata.cedar.ac.uk/view/ins1325553
#http://hepdata.cedar.ac.uk/view/ins1325553/d1/pyroot.py;jsessionid=5toji6p5psmx

#D2(SIG)/DPT(JET)/DYRAP IN PB*GEV**-1

import dlist
import tutils as tu
import IPython
import ROOT
#ROOT.gROOT.SetStyle("Plain")
from array import array

class AtlasJets(object):
	def __init__(self):

		self.xval = array("f", [108.0, 125.0, 143.0, 162.0, 183.0, 205.0, 228.0, 252.0, 277.0, 304.0, 332.0, 361.0, 392.0, 425.0, 460.0, 497.0, 536.0, 577.0, 620.0, 665.0, 712.0, 761.0, 812.0, 866.0, 923.0, 982.0, 1044.0, 1119.0, 1236.0, 1420.0, 1761.0])
		self.numpoints = 31

		xval = array("f", [108.0, 125.0, 143.0, 162.0, 183.0, 205.0, 228.0, 252.0, 277.0, 304.0, 332.0, 361.0, 392.0, 425.0, 460.0, 497.0, 536.0, 577.0, 620.0, 665.0, 712.0, 761.0, 812.0, 866.0, 923.0, 982.0, 1044.0, 1119.0, 1236.0, 1420.0, 1761.0])
		xerrminus = array("f", [8.0, 9.0, 9.0, 10.0, 11.0, 11.0, 12.0, 12.0, 13.0, 14.0, 14.0, 15.0, 16.0, 17.0, 18.0, 19.0, 20.0, 21.0, 22.0, 23.0, 24.0, 25.0, 26.0, 28.0, 29.0, 30.0, 32.0, 43.0, 74.0, 110.0, 231.0])
		xerrplus = array("f", [8.0, 9.0, 9.0, 10.0, 11.0, 11.0, 12.0, 12.0, 13.0, 14.0, 14.0, 15.0, 16.0, 17.0, 18.0, 19.0, 20.0, 21.0, 22.0, 23.0, 24.0, 25.0, 26.0, 28.0, 29.0, 30.0, 32.0, 43.0, 74.0, 110.0, 231.0])
		yval = array("f", [4230.0, 2020.0, 988.0, 502.0, 258.0, 137.0, 75.5, 42.8, 24.7, 14.4, 8.4, 5.14, 3.11, 1.89, 1.13, 0.683, 0.419, 0.253, 0.155, 0.0948, 0.058, 0.0361, 0.0222, 0.0131, 0.00794, 0.00498, 0.00297, 0.00167, 7.0E-4, 1.55E-4, 1.17E-5])
		yerrminus = array("f", [332.18860878874216, 150.2859636958821, 70.30847081938279, 34.262152777664156, 16.78565131176029, 8.778065862705748, 4.582196946880393, 2.4975734543752663, 1.4162472551076661, 0.8364404581319583, 0.48560428334189965, 0.28395883363614527, 0.16738157528234704, 0.09864297299351839, 0.05894453044176364, 0.03589624744579856, 0.022442173522410885, 0.014387872212735279, 0.009502511365423351, 0.006252209133930184, 0.0042021990671551965, 0.002771953491673336, 0.0018479416549231206, 0.0011801638699773854, 7.539238009242048E-4, 5.13544013303631E-4, 3.351628880111878E-4, 1.934102264617877E-4, 9.309736838385927E-5, 3.567963985244246E-5, 5.461419137000932E-6])
		yerrplus = array("f", [339.7511668986583, 149.1549452214039, 69.16769185797659, 33.89983364206969, 16.88055573611248, 8.820725610175163, 4.623066661859852, 2.5458805706474137, 1.4469309754096769, 0.8274676549569779, 0.4737629787140401, 0.2879776456602144, 0.17649462355550669, 0.1066973215268312, 0.06032559795808078, 0.03646996163543361, 0.022964143515707268, 0.014604237358040985, 0.009477194851325995, 0.006364046223465069, 0.00424916803621603, 0.002803973239886572, 0.0018926069639521041, 0.0012000629650147526, 7.842935708011382E-4, 5.226865278539325E-4, 3.4107188274614487E-4, 2.0248362625160582E-4, 9.453369769558365E-5, 3.4401271415457896E-5, 6.236451209622344E-6])
		numpoints = 31
		self.p8881_d1x1y1 = ROOT.TGraphAsymmErrors(numpoints, xval, yval, xerrminus, xerrplus, yerrminus, yerrplus)
		self.p8881_d1x1y1.SetName("/HepData/8881/d1x1y1")
		self.p8881_d1x1y1.SetTitle("/HepData/8881/d1x1y1")
		#self.p8881_d1x1y1.Draw("AP")
		
		xval = array("f", [108.0, 125.0, 143.0, 162.0, 183.0, 205.0, 228.0, 252.0, 277.0, 304.0, 332.0, 361.0, 392.0, 425.0, 460.0, 497.0, 536.0, 577.0, 620.0, 665.0, 712.0, 761.0, 812.0, 866.0, 923.0, 982.0, 1044.0, 1119.0, 1236.0, 1420.0, 1761.0])
		xerrminus = array("f", [8.0, 9.0, 9.0, 10.0, 11.0, 11.0, 12.0, 12.0, 13.0, 14.0, 14.0, 15.0, 16.0, 17.0, 18.0, 19.0, 20.0, 21.0, 22.0, 23.0, 24.0, 25.0, 26.0, 28.0, 29.0, 30.0, 32.0, 43.0, 74.0, 110.0, 231.0])
		xerrplus = array("f", [8.0, 9.0, 9.0, 10.0, 11.0, 11.0, 12.0, 12.0, 13.0, 14.0, 14.0, 15.0, 16.0, 17.0, 18.0, 19.0, 20.0, 21.0, 22.0, 23.0, 24.0, 25.0, 26.0, 28.0, 29.0, 30.0, 32.0, 43.0, 74.0, 110.0, 231.0])
		yval = array("f", [4230.0, 2020.0, 988.0, 502.0, 258.0, 137.0, 75.5, 42.8, 24.7, 14.4, 8.4, 5.14, 3.11, 1.89, 1.13, 0.683, 0.419, 0.253, 0.155, 0.0948, 0.058, 0.0361, 0.0222, 0.0131, 0.00794, 0.00498, 0.00297, 0.00167, 7.0E-4, 1.55E-4, 1.17E-5])
		yerrminus = array("f", [341.1963729423277, 154.569074798292, 72.31383865457566, 35.133688576066135, 17.351128204240784, 9.027884208938438, 4.7603573248234206, 2.5872768154953967, 1.4715977261466529, 0.8636399249687339, 0.49971175691592445, 0.29234809046751103, 0.17137877856957673, 0.10119904357749632, 0.06032559795808079, 0.036693122198717294, 0.02313172218858769, 0.014978561540081209, 0.009992981149286729, 0.0066343814311810596, 0.004490507432351047, 0.0030184004224091945, 0.0020262897226211263, 0.0012975614474852431, 8.389766349547525E-4, 5.690725992349306E-4, 3.692368215657806E-4, 2.1437232610577324E-4, 1.0191673071679644E-4, 3.717480396720338E-5, 5.562399524485813E-6])
		yerrplus = array("f", [348.5635501727052, 152.87023151679986, 71.32162531070082, 34.93948850455598, 17.3913626251654, 9.096232587725536, 4.793173855599231, 2.635677377829085, 1.4968770616186218, 0.8543460657134205, 0.4880681919568207, 0.29643142478489015, 0.18119960690906595, 0.10945711087453386, 0.06192369069265817, 0.03744814944279623, 0.023808677250321996, 0.015173863509666874, 0.009896346409155246, 0.006725864584899107, 0.004538940074510787, 0.00304847347208402, 0.0020671049320244964, 0.0013209581673921393, 8.704717275133065E-4, 5.852082736940754E-4, 3.791958476829619E-4, 2.2601215100078134E-4, 1.0482251666507534E-4, 3.618777003353482E-5, 6.321768875876434E-6])
		numpoints = 31
		self.p8881_d1x1y2 = ROOT.TGraphAsymmErrors(numpoints, xval, yval, xerrminus, xerrplus, yerrminus, yerrplus)
		self.p8881_d1x1y2.SetName("/HepData/8881/d1x1y2")
		self.p8881_d1x1y2.SetTitle("/HepData/8881/d1x1y2")
		#self.p8881_d1x1y2.Draw("AP")
		
		xval = array("f", [108.0, 125.0, 143.0, 162.0, 183.0, 205.0, 228.0, 252.0, 277.0, 304.0, 332.0, 361.0, 392.0, 425.0, 460.0, 497.0, 536.0, 577.0, 620.0, 665.0, 712.0, 761.0, 812.0, 866.0, 923.0, 982.0, 1044.0, 1119.0, 1236.0, 1420.0, 1761.0])
		xerrminus = array("f", [8.0, 9.0, 9.0, 10.0, 11.0, 11.0, 12.0, 12.0, 13.0, 14.0, 14.0, 15.0, 16.0, 17.0, 18.0, 19.0, 20.0, 21.0, 22.0, 23.0, 24.0, 25.0, 26.0, 28.0, 29.0, 30.0, 32.0, 43.0, 74.0, 110.0, 231.0])
		xerrplus = array("f", [8.0, 9.0, 9.0, 10.0, 11.0, 11.0, 12.0, 12.0, 13.0, 14.0, 14.0, 15.0, 16.0, 17.0, 18.0, 19.0, 20.0, 21.0, 22.0, 23.0, 24.0, 25.0, 26.0, 28.0, 29.0, 30.0, 32.0, 43.0, 74.0, 110.0, 231.0])
		yval = array("f", [4230.0, 2020.0, 988.0, 502.0, 258.0, 137.0, 75.5, 42.8, 24.7, 14.4, 8.4, 5.14, 3.11, 1.89, 1.13, 0.683, 0.419, 0.253, 0.155, 0.0948, 0.058, 0.0361, 0.0222, 0.0131, 0.00794, 0.00498, 0.00297, 0.00167, 7.0E-4, 1.55E-4, 1.17E-5])
		yerrminus = array("f", [328.01488565155086, 148.38697814835368, 69.22411970520103, 33.52984230443084, 16.374140281553714, 8.565962659853241, 4.459896900153635, 2.432926838193044, 1.3912569631811371, 0.8249578898343843, 0.47279390859020176, 0.2815763122139361, 0.16795842861851262, 0.10024147355760488, 0.05947289945008567, 0.035928721459161324, 0.02227334796140895, 0.014197538582796666, 0.009294172757701459, 0.006183554823432878, 0.004129115280541342, 0.0027523734721145673, 0.0018393875611191898, 0.0011686198612038043, 7.54007416939648E-4, 5.083504381821658E-4, 3.3221544334964326E-4, 1.9288319263222495E-4, 9.20067388836274E-5, 3.5471640785280854E-5, 5.460040392707731E-6])
		yerrplus = array("f", [335.32482924621013, 146.74170396993483, 68.01495621523254, 33.318734984389785, 16.47141590635122, 8.580193079995345, 4.501877037414505, 2.4894924542966583, 1.4032643683924992, 0.8035664502702937, 0.4673903721729835, 0.2885733515070302, 0.17470450951249086, 0.1037093477995113, 0.06007105932976378, 0.035987100837522316, 0.02240302529592823, 0.014217812166785715, 0.009336727063055873, 0.0062096605136190836, 0.004148622060395476, 0.002799787161553535, 0.0018512723624577777, 0.0011832135817340837, 7.704255278740444E-4, 5.180396977066524E-4, 3.374448074870912E-4, 1.9730044652762444E-4, 9.363791966933056E-5, 3.405029331738569E-5, 6.227049530074415E-6])
		numpoints = 31
		self.p8881_d1x1y3 = ROOT.TGraphAsymmErrors(numpoints, xval, yval, xerrminus, xerrplus, yerrminus, yerrplus)
		self.p8881_d1x1y3.SetName("/HepData/8881/d1x1y3")
		self.p8881_d1x1y3.SetTitle("/HepData/8881/d1x1y3")
		#self.p8881_d1x1y3.Draw("AP")

		self.hl = dlist.dlist('AtlasJets7TeVabs(y)=0.5')
		self.hl.add(self.p8881_d1x1y2, 'Atlas 7TeV pp R=0.4', 'p serror noleg +k2 +a10')
		self.hl.add(self.p8881_d1x1y3, 'Atlas 7TeV pp R=0.4', 'p serror noleg +k3 +a10')
		self.hl.add(self.p8881_d1x1y1, 'Atlas 7TeV pp R=0.4', 'p')
		self.hl.reset_axis_titles('p_{T} (GeV/c)', 'd#sigma/dp_{T}/dy (pb c/GeV)')
		tu.gList.append(self.hl)

	def get(self):
		return self.hl

	def draw(self):
		self.hl.make_canvas()
		self.hl.draw(logy=True)
		self.hl.self_legend()
		ROOT.gPad.SetLogy()
		self.hl.update()

if __name__ == '__main__':
	tu.setup_basic_root()
	atlas = AtlasJets()
	atlas.draw()
	if not tu.is_arg_set('-b'):
		IPython.embed()